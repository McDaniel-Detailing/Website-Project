<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/png" sizes="32x32" href="../assets/favicon-96x96.png">
  <link rel="icon" type="image/x-icon" href="../assets/favicon.ico">
  <link rel="icon" type="image/svg+xml" href="../assets/favicon.svg">
  <link rel="apple-touch-icon" sizes="180x180" href="../assets/apple-touch-icon.png">
  <link rel="manifest" href="../assets/site.webmanifest">
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Booking | McDaniel Detailing</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../style.css"/>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="header-container">
      <a href="../">
        <img src="../assets/logo.png" alt="McDetailing Logo" class="logo"/>
      </a>
      <nav>
        <ul>
          <li><a href="../portfolio/">Portfolio</a></li>
          <li><a href="../services/">Services</a></li>
          <li><a href="../book/" class="active">Book</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Booking Form Wrapped in Container -->
<form id="booking-form" action="https://formspree.io/f/xyzwabaq" method="POST">

  <!-- 1. CLIENT INFO -->
  <fieldset class="form-section">
    <legend>1. Client Info</legend>
    <label for="name">Full Name *</label>
    <input type="text" id="name" name="name" pattern="^[A-Za-z\s\-']+$" required>

    <label for="phone">Phone Number *</label>
    <input type="tel" id="phone" name="phone" pattern="^\d{10}$" placeholder="10-digit number" required>

    <label for="email">Email Address *</label>
    <input type="email" id="email" name="email" required>
  </fieldset>

  <!-- 2. SERVICE SELECTION -->
  <fieldset class="form-section">
    <legend>2. Service Selection</legend>
    
    <p><strong>Select One:</strong></p>
    <label><input type="radio" name="main_service" value="Full Detail" required> “Fresh Start” Full Detail Package</label><br>
    <label><input type="radio" name="main_service" value="Interior Detail" required> Interior: Deep Clean & Restore</label><br>
    <label><input type="radio" name="main_service" value="Exterior Detail" required> Exterior: Wash, Decontaminate & Seal</label><br><br>

    <p><strong>Select as Many Add-Ons as You Want:</strong></p>
    <label><input type="checkbox" name="addons" value="Engine Bay Cleaning"> Engine Bay Cleaning</label><br>
    <label><input type="checkbox" name="addons" value="Pet Hair Removal"> Pet Hair Removal</label>
  </fieldset>

  <!-- 3. VEHICLE INFO -->
  <fieldset class="form-section">
    <legend>3. Vehicle Info</legend>
    <label for="make">Vehicle Make *</label>
    <input type="text" id="make" name="vehicle_make" required>

    <label for="model">Vehicle Model *</label>
    <input type="text" id="model" name="vehicle_model" required>

    <label for="year">Vehicle Year *</label>
    <input type="number" id="year" name="vehicle_year" min="1900" max="2099" required>

    <div id="vehicle-state" style="display: none; margin-top: 20px;">
      <legend>State of Vehicle's Interior</legend>
      <div style="display: flex; gap: 20px; flex-wrap: wrap;">
        <!-- Dirtiness -->
        <div>
          <h4>Dirtiness</h4>
          <select name="dirtiness" required>
            <option value="" disabled selected>Select level</option>
            <option value="1 - Spotless">1 - Spotless</option>
            <option value="2 - Lightly dusty">2 - Lightly dusty</option>
            <option value="3 - Moderate dirt">3 - Moderate dirt</option>
            <option value="4 - Heavy buildup">4 - Heavy buildup</option>
            <option value="5 - Extreme grime">5 - Extreme grime</option>
          </select>
        </div>
        <!-- Stains / Odors -->
        <div>
          <h4>Stains / Odors</h4>
          <select name="stains_odors" required>
            <option value="" disabled selected>Select level</option>
            <option value="1 - None">1 - None</option>
            <option value="2 - Faint odor / mild stains">2 - Faint odor / mild stains</option>
            <option value="3 - Moderate stains / smell">3 - Moderate stains / smell</option>
            <option value="4 - Strong stains / odor">4 - Strong stains / odor</option>
            <option value="5 - Severe stains / odor">5 - Severe stains / odor</option>
          </select>
        </div>
        <!-- Pet Hair -->
        <div>
          <h4>Pet Hair</h4>
          <select name="pet_hair" required>
            <option value="" disabled selected>Select level</option>
            <option value="1 - None">1 - None</option>
            <option value="2 - Minimal">2 - Minimal</option>
            <option value="3 - Some throughout">3 - Some throughout</option>
            <option value="4 - Dense areas">4 - Dense areas</option>
            <option value="5 - Covers surfaces">5 - Covers surfaces</option>
          </select>
        </div>
      </div>
    </div>
  </fieldset>

  <!-- 4. LOCATION -->
  <fieldset class="form-section">
    <legend>4. Location</legend>
    <label for="location">Where would you like your detail performed? *</label>
    <select id="location" name="location" required>
      <option value="" disabled selected>Select location</option>
      <option value="Client's Home">Client's Home</option>
      <option value="McDaniel Detailing Location">McDaniel Detailing Tacoma Location</option>
    </select>

    <div id="client-checklist" style="display: none; margin-top: 10px;">
      <label>
        <input type="checkbox" id="confirm-conditions" name="client_conditions" required>
        I confirm I will provide access to water, power, and sufficient working space at the selected location.
      </label>
    </div>
  </fieldset>

  <!-- 5. SCHEDULING -->
  <fieldset class="form-section">
    <legend>5. Scheduling</legend>
    <p>
      We prefer scheduling on <strong>Tuesdays, Thursdays, and Saturdays</strong>, but we’re happy to coordinate with your availability on any day except Sunday. After submission, we will contact you to confirm the exact appointment time and pricing.
    </p>

    <label for="preferred-date">Preferred Date *</label>
    <input type="date" id="preferred-date" name="preferred_date" required>

    <label for="preferred-time">Preferred Time *</label>
    <select id="preferred-time" name="preferred_time" required>
      <option value="" disabled selected>Select a time</option>
    </select>

    <label for="notes">Additional Notes or Requests</label>
    <textarea id="notes" name="notes" rows="4" placeholder="Let us know if you have any specific concerns or requests..."></textarea>
  </fieldset>

  <button class="btn primary square" type="submit">Submit Booking</button>
</form>
  <!-- Footer -->
  <footer>
    <div class="footer-container">
      <div class="footer-col contact">
        <h4>Contact Us</h4>
        <p class="email">
          mcdetailin@gmail.com<br/>
          Tacoma, WA 98406
        </p>
      </div>
      <div class="footer-col social">
        <h4>Follow Us</h4>
        <div class="social-icons">
          <a href="http://www.instagram.com/mcdetailin"><img src="../assets/icons8-instagram-150.png" alt="Instagram"/></a>
          <a href="http://www.facebook.com/themcdetailing"><img src="../assets/icons8-facebook-150.png" alt="Facebook"/></a>
          <a href="http://www.linkedin.com/company/mcdetailing/"><img src="../assets/icons8-linkedin-150.png" alt="LinkedIn"/></a>
        </div>
      </div>
    </div>
    <div class="footer-bottom">© McDaniel Detailing</div>
  </footer>

<script>
  const serviceRadios = document.querySelectorAll('input[name="main_service"]');
  const vehicleState = document.getElementById('vehicle-state');
  const dirtinessInputs = vehicleState.querySelectorAll('select');

  const locationSelect = document.getElementById('location');
  const checklistSection = document.getElementById('client-checklist');
  const checklistInput = document.getElementById('confirm-conditions');

  const dateInput = document.getElementById('preferred-date');
  const timeSelect = document.getElementById('preferred-time');

  function updateFormLogic() {
    const selectedService = [...serviceRadios].find(r => r.checked)?.value;

    if (selectedService === "Full Detail" || selectedService === "Interior Detail") {
      vehicleState.style.display = 'block';
      dirtinessInputs.forEach(el => el.setAttribute('required', 'required'));
    } else {
      vehicleState.style.display = 'none';
      dirtinessInputs.forEach(el => el.removeAttribute('required'));
    }

    if (locationSelect.value === "Client's Home") {
      checklistSection.style.display = 'block';
      checklistInput.setAttribute('required', 'required');
    } else {
      checklistSection.style.display = 'none';
      checklistInput.removeAttribute('required');
    }

    updateTimeOptions(); // Call this to re-evaluate times
  }

  function generateTimeOptions(startHour, endHour, interval = 30) {
    const options = [];
    for (let hour = startHour; hour <= endHour; hour++) {
      for (let minutes = 0; minutes < 60; minutes += interval) {
        if (hour === endHour && minutes > 0) break;
        const date = new Date();
        date.setHours(hour, minutes);
        const timeString = date.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });
        options.push(timeString);
      }
    }
    return options;
  }

  function updateTimeOptions() {
    const selectedService = [...serviceRadios].find(r => r.checked)?.value;
    if (!selectedService || !dateInput.value) return;

    const selectedDate = new Date(dateInput.value);
    const day = selectedDate.getDay(); // Sunday = 0, Saturday = 6
    const isWeekend = (day === 0 || day === 6);

    let times = [];

    if (selectedService === "Full Detail") {
      if (isWeekend) {
        times = generateTimeOptions(7, 12); // 7:00 AM – 12:00 PM
      } else {
        times = ["3:00 PM"];
      }
    }

    if (selectedService === "Interior Detail" || selectedService === "Exterior Detail") {
      if (isWeekend) {
        times = generateTimeOptions(7, 15); // 7:00 AM – 3:00 PM
      } else {
        times = generateTimeOptions(15, 17); // 3:00 PM – 5:00 PM
      }
    }

    // Clear and repopulate time select
    timeSelect.innerHTML = '<option value="" disabled selected>Select a time</option>';
    times.forEach(time => {
      const option = document.createElement('option');
      option.value = time;
      option.textContent = time;
      timeSelect.appendChild(option);
    });
  }

  // Event Listeners
  serviceRadios.forEach(radio => radio.addEventListener('change', updateFormLogic));
  locationSelect.addEventListener('change', updateFormLogic);
  dateInput.addEventListener('change', updateTimeOptions);

  // On page load
  window.addEventListener('DOMContentLoaded', () => {
    updateFormLogic();
    if (dateInput.value) updateTimeOptions();
  });
</script>
  
</body>
</html>
